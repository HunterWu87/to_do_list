# 待办事项应用 (v0.1)

一个用于个人任务管理的桌面应用程序，界面简洁实用。

作者：hunter

[查看变更日志](CHANGELOG.md)

## 功能特点

- 基本任务管理：添加、编辑、删除和完成任务
- 任务分类：创建不同的列表（工作、个人、学习等）
- 任务属性：优先级（高、中、低）、截止日期、备注
- 本地数据存储使用SQLite
- 记住上次选择：启动时自动选择上次关闭时的分类

## 技术栈

- Python 3.8+
- Tkinter用于UI界面（Python内置）
- SQLAlchemy用于数据库ORM
- SQLite用于本地存储
- tkcalendar用于日期选择

## 安装和设置

1. 克隆此仓库
2. 创建并激活虚拟环境：
   ```bash
   # 创建虚拟环境
   python -m venv .venv
   
   # 在Windows上激活
   .\.venv\Scripts\activate
   
   # 在Linux/macOS上激活
   source .venv/bin/activate
   ```
3. 安装所需依赖：
   ```
   pip install -r requirements.txt
   ```
4. 运行应用程序：
   ```
   python main.py
   ```

## 键盘快捷键

- `Ctrl+N`：添加新任务
- `Ctrl+E`：编辑选中的任务
- `Ctrl+D`：删除选中的任务
- `Ctrl+Space`：切换任务完成状态
- `Ctrl+Q`：退出应用程序

## 项目结构

```
to_do_list/
│
├── main.py                 # 应用程序入口点
├── requirements.txt        # 项目依赖
├── README.md               # 项目文档
│
├── models/                 # 数据模型
│   ├── __init__.py         # 模型包初始化
│   ├── database.py         # 数据库连接和设置
│   └── models.py           # 数据模型定义
│
├── views/                  # 用户界面
│   ├── __init__.py         # 视图包初始化
│   ├── main_window.py      # 主窗口
│   ├── task_dialog.py      # 任务对话框
│   └── category_dialog.py  # 分类对话框
│
└── data/                   # 数据存储（被.gitignore忽略）
    └── todo.db             # SQLite数据库文件
```

## 代码框架详解

### 主要文件

#### `main.py`
应用程序的入口点，负责初始化数据库、创建主窗口并启动应用程序。
- 创建数据目录
- 初始化数据库
- 设置应用程序主题
- 创建并显示主窗口

#### `models/database.py`
处理数据库连接和会话管理。
- 创建SQLAlchemy引擎
- 提供会话工厂
- 定义获取数据库会话的函数
- 提供数据库初始化函数

#### `models/models.py`
定义应用程序的数据模型。
- `PriorityEnum`：定义任务优先级枚举（低、中、高）
- `Category`：分类模型，包含名称、图标和颜色
- `Task`：任务模型，包含标题、描述、优先级、完成状态等

#### `views/main_window.py`
应用程序的主窗口，包含分类列表和任务列表。
- 左侧面板显示分类列表
- 右侧面板显示任务列表
- 提供添加、编辑、删除分类和任务的功能
- 实现任务完成状态切换
- 处理键盘快捷键

#### `views/task_dialog.py`
任务编辑对话框，用于添加和编辑任务。
- 提供任务标题、描述和优先级的输入
- 处理任务数据的保存
- 支持编辑现有任务

#### `views/category_dialog.py`
分类编辑对话框，用于添加和编辑分类。
- 提供分类名称、图标和颜色的输入
- 包含颜色选择器
- 处理分类数据的保存
- 支持编辑现有分类

### 设计模式

该应用程序采用了简化的MVC（模型-视图-控制器）架构：
- **模型（Model）**：`models/`目录中的类定义了数据结构和数据库交互
- **视图（View）**：`views/`目录中的类负责用户界面的显示和交互
- **控制器（Controller）**：控制逻辑嵌入在视图类中，处理用户输入并更新模型

### 数据流

1. 用户通过主窗口或对话框进行操作
2. 视图类捕获用户操作并调用相应的处理函数
3. 处理函数与数据库交互，创建、读取、更新或删除数据
4. 视图根据操作结果更新界面显示

## 开发指南

### 添加新功能

1. 如需添加新的数据属性，修改`models/models.py`中的模型类
2. 更新数据库（可能需要迁移或重建）
3. 修改相应的对话框以支持新属性的输入
4. 更新主窗口以显示新属性

### 样式定制

主窗口中的样式设置位于`views/main_window.py`的`__init__`方法中，可以通过修改ttk.Style配置来自定义应用程序的外观。

## 许可证

本项目采用 [MIT 许可证](LICENSE) 进行许可。 